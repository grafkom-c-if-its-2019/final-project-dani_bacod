{"code":"!function(e){function t(t){for(var i,a,s=t[0],c=t[1],l=t[2],p=0,f=[];p<s.length;p++)a=s[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(u&&u(t);f.length;)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(i=!1)}i&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},o={0:0},r=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"/\";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;r.push([390,1]),n()}({385:function(e,t,n){var i=n(386);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(388)(i,o);i.locals&&(e.exports=i.locals)},386:function(e,t,n){(e.exports=n(387)(!1)).push([e.i,\"html,body{width:100%;height:100%}body{background-color:#ffffff;margin:0;overflow:hidden;font-family:'Lato', cursive}#blocker{position:absolute;width:100%;height:100%;background-color:rgba(0,0,0,0.5)}.blocker-instruction-controls{font-size:24px}.blocker-instruction-tips{font-size:20px}.blocker-title{display:inline-block;margin-bottom:50px;font-size:40px;z-index:999}#instructions{width:100%;height:100%;display:-webkit-box;display:-moz-box;display:box;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;box-orient:horizontal;-webkit-box-pack:center;-moz-box-pack:center;box-pack:center;-webkit-box-align:center;-moz-box-align:center;box-align:center;color:#ffffff;text-align:center;cursor:pointer}#scores{position:absolute;top:-5;left:-20;font-size:150%;color:#ffffff}#scoreslist{list-style:none}#winner{font-size:400%}.timer{position:absolute;right:20;top:10;font-size:200%;color:#ffffff}.center{margin-top:0;position:absolute;left:50%;top:45%;transform:translate(-50%, -50%)}#title{margin-bottom:0;font-size:100;letter-spacing:5px;color:#D5D1D0;font-weight:300}#nickname-form{padding-top:5px;margin:auto;width:43.6%}#backgroundimage{background:-webkit-linear-gradient(rgba(156,0,0,0), rgba(156,0,0,0.5)),url(/images/background.jpg);background:-o-linear-gradient(rgba(156,0,0,0), rgba(156,0,0,0.5)),url(/images/background.jpg);background:linear-gradient(rgba(156,0,0,0), rgba(156,0,0,0.5)),url(/images/background.jpg);line:rgba(39,62,84,0.11);background-size:cover;height:100%;width:100%}#bomberman{position:absolute;right:20px;bottom:20px}#announcer{font-size:25;bottom:47;color:#ffffff}.mute{position:absolute;left:0;top:0}.git{position:absolute !important;bottom:0;left:0}.material-icons:hover{color:#cc2d2d !important}.dead-overlay{background-color:#700303;position:absolute;opacity:0.7;width:100vw;height:100vh;pointer-events:none}.dead-message{font-size:50;margin:auto;text-align:center;position:relative;display:table;top:60}.chat-message{font-size:15;color:#ffffff}.chat-box{position:absolute;bottom:5%;margin-left:2%}\\n\",\"\"])},390:function(e,t,n){\"use strict\";n.r(t);var i=n(1),o=n.n(i),r=n(34),a=n.n(r),s=n(15),c=n(169),l=n.n(c),u=n(170),p=n.n(u),f=n(0),d=n(3),h=n(35),m=n(171),y={},b=function(e){return e.dead},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:180,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SET_TIME\":return t.time;default:return e}},w=function(e){return e.timer},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SET_WINNER\":return t.playerId;default:return e}},x=function(e){return e.winner},k=function(e){return e.isPlaying},E={score:0,nickname:\"\"},S={killerNickname:\"\",victimNickname:\"\"},M=function(e){return e.announcement.killerNickname},_=function(e){return e.announcement.victimNickname};function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}var C={isChatting:!1,lastFiveMessages:[]},z=function(e){return e.chat.isChatting},T=function(e){return e.chat.lastFiveMessages},j=function(e){return e.sound},P=Object(h.c)({players:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e);switch(t.type){case\"UPDATE_PLAYER_LOCATIONS\":return t.otherPlayers;case\"ADD_PLAYER\":return n[t.player.id]=t.player.position,n;case\"REMOVE_PLAYER\":return delete n[t.id],n;default:return e}},bombs:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case\"UPDATE_BOMB_LOCATIONS\":for(var i in e=Object.assign({},t),n.allBombs)e[i]=n.allBombs[i];return e;case\"REMOVE_PLAYER_BOMBS\":return delete(e=Object.assign({},t))[n.id],e;default:return t}},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"GENERATE_MAP\":return t.map;default:return e}return newState},dead:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"KILL_PLAYER\":return!0;case\"REVIVE_PLAYER\":return!1;default:return e}},timer:v,winner:g,isPlaying:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"START_GAME\":return!0;default:return e}},ownInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e);switch(t.type){case\"SET_NAME\":n.nickname=t.name;break;case\"SET_SCORE\":n.score=t.score;break;default:return e}return n},announcement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"ANNOUNCE_KILL\":return Object.assign({},e,t);case\"REMOVE_ANNOUNCEMENT\":return S;default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"START_CHAT\":return Object.assign({},e,{isChatting:!0});case\"STOP_CHAT\":return Object.assign({},e,{isChatting:!1});case\"RECEIVE_MESSAGE\":return e.lastFiveMessages.length>0&&e.lastFiveMessages.length>4?Object.assign({},e,{lastFiveMessages:[].concat(O(e.lastFiveMessages.slice(1)),[t.message])}):Object.assign({},e,{lastFiveMessages:[].concat(O(e.lastFiveMessages),[t.message])});default:return e}},sound:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"MUTE\":return!1;case\"UNMUTE\":return!0;default:return e}}}),B=Object(h.d)(P,Object(h.a)(m.a)),A=function(e,t,n){f.Geometry.call(this);var i=this,o=e/2,r=t/2,a=n/2;function s(e,t,n){i.vertices.push(new f.Vector3(e,t,n))}function c(e,t,n){i.faces.push(new f.Face3(e,t,n))}s(o,r,-a),s(o,-r,-a),s(-o,-r,-a),s(-o,r,-a),s(o,r,a),s(o,-r,a),s(-o,-r,a),s(-o,r,a),c(0,1,2),c(4,7,6),c(0,4,5),c(1,5,6),c(2,6,7),c(4,0,3)};(A.prototype=new f.Geometry).constructor=A;var N=function(e,t,n,i,o,r){\"cube\"===i&&(this.particle=new f.Mesh(o,r)),\"bomb\"===i&&(this.particle=new f.Mesh(o,r),n.y-=6),\"player\"===i&&(this.particle=new f.Mesh(o,r),n.y-=6),this.particle.position.x=n.x,this.particle.position.y=n.y,this.particle.position.z=n.z,this.reset(this.particle.position.x,this.particle.position.y,this.particle.position.z),e.add(this.particle)};function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}N.prototype.reset=function(e,t,n){this.xd=.75*Math.random()*2-.75,this.yd=Math.abs(.75*Math.random()*2-.75),this.zd=.75*Math.random()*2-.75,this.particle.position.x=e,this.particle.position.y=t,this.particle.position.z=n,this.xrd=.1*Math.random()*2-.1,this.zrd=.1*Math.random()*2-.1,this.particle.rotation.x=360*Math.random(),this.particle.rotation.z=360*Math.random(),this.ticks=0},N.prototype.loop=function(e){this.particle.position.x+=this.xd,this.particle.position.y+=this.yd,this.particle.position.z+=this.zd,this.particle.rotation.x+=this.xrd,this.particle.rotation.z+=this.zrd,this.ticks++,this.ticks>100&&(ze.remove(this.particle),this.ticks>301&&(Qe[e]=[]))};var I=function(){function e(t,n,i,o,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.socketId=t,this.x=n,this.y=i,this.z=o,this.dead=r,this.nickname=B.getState().players[t].nickname,this.material,this.playerMesh,this.playerBox,this.sprite}var t,n,i;return t=e,(n=[{key:\"init\",value:function(){var e=new d.Vec3(2,2,2),t=new d.Box(e),n=new f.BoxGeometry(1.5*e.x,1.5*e.y,1.5*e.z),i=(new f.TextureLoader).load(\"images/creeperface.jpg\"),o=(new f.TextureLoader).load(\"images/creeperbody.jpg\"),r=new f.MeshLambertMaterial({map:i}),a=new f.MeshLambertMaterial({map:o}),s=[r,r,a,a,r,r],c=new d.Body({mass:0});c.addShape(t),c.name=this.socketId,this.material=new f.MultiMaterial(s);var l=new f.Mesh(n,this.material);l.name=this.socketId,l.position.set(this.x,this.y,this.z),c.position.set(l.position.x,l.position.y,l.position.z),this.dead||(ze.add(l),_e.add(c)),this.playerMesh=l,this.playerBox=c}},{key:\"explode\",value:function(){if(!this.dead){for(var e=new f.BoxGeometry(.4,.4,.4),t=[],n=0;n<Ze;n++){var i=new N(ze,_e,{x:this.x,y:this.y,z:this.z},\"player\",e,this.material);t.push(i)}return Qe[this.playerMesh.id]=t.slice(),_e.remove(this.playerBox),ze.remove(this.playerMesh),this.dead=!0,!0}}}])&&L(t.prototype,n),i&&L(t,i),e}(),R=function(e){return{type:\"UPDATE_PLAYER_LOCATIONS\",otherPlayers:e}},V=function(e){return{type:\"UPDATE_BOMB_LOCATIONS\",allBombs:e}},D=function(e){return{type:\"GENERATE_MAP\",map:e}},G=function(e){return{type:\"SET_TIME\",time:e}},F=function(e){return{type:\"SET_WINNER\",playerId:e}},U=io(\"/\"),q=[],W=0;U.on(\"connect\",(function(){U.on(\"initial\",(function(e){B.dispatch(R(e.players)),B.dispatch(V(e.bombs)),B.dispatch(D(e.map)),B.dispatch(G(e.timer))})),U.on(\"update_world\",(function(e){W+=1,q=Object.keys(e.players),e.players[U.id]&&(B.dispatch({type:\"SET_SCORE\",score:e.players[U.id].score}),B.dispatch({type:\"SET_NAME\",name:e.players[U.id].nickname})),delete e.players[U.id],delete e.bombs[U.id],B.dispatch(R(e.players)),B.dispatch(V(e.bombs)),W%30==0&&(B.dispatch(G(e.timer)),W=0)})),U.on(\"set_winner\",(function(e){B.dispatch(F(e))})),U.on(\"update_bomb_positions\",(function(e){delete e[U.id],B.dispatch(V(e))})),U.on(\"kill_player\",(function(e){var t,n;B.dispatch((t=e.killerNickname,n=e.victimNickname,{type:\"ANNOUNCE_KILL\",killerNickname:t.nickname,victimNickname:n.nickname})),setTimeout((function(){B.dispatch({type:\"REMOVE_ANNOUNCEMENT\"})}),3e3);var i=Xe.filter((function(t){return t.socketId===e.id}))[0];if(i){var o=B.getState(),r=o.announcement;if(o.sound){var a=new f.PositionalAudio(Ve),s=new f.AudioLoader;r.killer.nickname===r.victim.nickname&&s.load(\"sounds/witch.mp3\",(function(e){a.setBuffer(e),a.setRefDistance(10),a.play()})),s.load(\"sounds/die.mp3\",(function(e){a.setBuffer(e),a.setRefDistance(10),a.play()}))}i.explode()}})),U.on(\"reset_world\",(function(e){setTimeout((function(){B.dispatch(D(e.map)),B.dispatch(R(e.players)),B.dispatch(V(e.bombs)),B.dispatch({type:\"REVIVE_PLAYER\"}),B.dispatch(G(e.timer)),we(ze,_e,We,qe,Fe,Ue,He,$e,Je,Ye,Ke),We=[],qe=[],Fe=[],Ue=[],He=[],$e=[],Je=[],Ye=[],Ke=[],Xe=[],de(),De.position.x=at[q.indexOf(Y.id)].x,De.position.y=5,De.position.z=at[q.indexOf(Y.id)].z,tt=!1,B.dispatch(F(null))}),5e3)})),U.on(\"remove_player\",(function(e){B.dispatch(function(e){return{type:\"REMOVE_PLAYER\",id:e}}(e));var t=_e.bodies.filter((function(t){return t.name===e}))[0],n=ze.children.filter((function(t){return t.name===e}))[0];t&&_e.remove(t),n&&(ze.remove(n),ze.remove(void 0),_e.remove(void 0))})),U.on(\"new_message\",(function(e){B.dispatch(function(e){return{type:\"RECEIVE_MESSAGE\",message:e}}(e))}))}));var Y=U,K=function(e,t){var n=this,i=new f.Object3D;i.add(e);var o=!1,r=!1,a=!1,s=!1,c=new f.Object3D;c.position.y=2,c.add(i);var l=new f.Quaternion,u=new d.Vec3,p=new d.Vec3(0,1,0);t.addEventListener(\"collide\",(function(e){var n=e.contact;n.bi.id===t.id?n.ni.negate(u):u.copy(n.ni),u.dot(p)>.5&&!0}));var h=t.velocity,m=Math.PI/2;document.addEventListener(\"mousemove\",(function(e){if(!1!==n.enabled){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,o=e.movementY||e.mozMovementY||e.webkitMovementY||0;c.rotation.y-=.002*t,i.rotation.x-=.002*o,i.rotation.x=Math.max(-m,Math.min(m,i.rotation.x))}}),!1),document.addEventListener(\"keydown\",(function(e){switch(e.keyCode){case 38:case 87:o=!0;break;case 37:case 65:a=!0;break;case 40:case 83:r=!0;break;case 39:case 68:s=!0}}),!1),document.addEventListener(\"keyup\",(function(e){switch(e.keyCode){case 38:case 87:o=!1;break;case 37:case 65:a=!1;break;case 40:case 83:r=!1;break;case 39:case 68:s=!1}}),!1),this.enabled=!1,this.getObject=function(){return c},this.getDirection=function(e){e.set(0,0,-1),l.multiplyVector3(e)};var y=new f.Vector3,b=new f.Euler;this.update=function(e){!1!==n.enabled&&(e*=.1,y.set(0,0,0),o&&(y.z=-.3*e),r&&(y.z=.3*e),a&&(y.x=-.3*e),s&&(y.x=.3*e),b.x=i.rotation.x,b.y=c.rotation.y,b.order=\"XYZ\",l.setFromEuler(b),y.applyQuaternion(l),h.x+=y.x,h.z+=y.z,c.position.copy(t.position))}};function H(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var J=function(){function e(t,n,i,o,r,a,s,c,l){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.x=r,this.y=a,this.z=s,this.j=c,this.k=l,this.exploded=!1,this.cubeMesh={},this.cubeBox={},this.material=t,this.texture=n,this.fixedCubeShape=i,this.fixedCubeGeometry=o}var t,n,i;return t=e,(n=[{key:\"init\",value:function(){var e=new d.Body({mass:0});e.addShape(this.fixedCubeShape);var t=new f.Mesh(this.fixedCubeGeometry,this.material);t.castShadow=!0,t.receiveShadow=!0,t.position.set(this.x,this.y,this.z),e.position.set(t.position.x,t.position.y,t.position.z),ze.add(t),_e.add(e),this.cubeMesh=t,this.cubeBox=e}},{key:\"explode\",value:function(){if(!this.exploded){for(var e=new f.BoxGeometry(.4,.4,.4),t=[],n=0;n<Ze;n++){var i=new N(ze,_e,{x:this.x,y:this.y,z:this.z},\"cube\",e,this.material);t.push(i)}return Qe[this.cubeMesh.id]=t.slice(),_e.remove(this.cubeBox),ze.remove(this.cubeMesh),this.exploded=!0,!0}}}])&&H(t.prototype,n),i&&H(t,i),e}(),X=n(57);function Q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Z=function(){function e(t,n,i,o,r,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.x=r,this.y=a,this.z=s,this.wallMesh={},this.wallBody={},this.material=t,this.texture=n,this.fixedCubeShape=i,this.fixedCubeGeometry=o}var t,n,i;return t=e,(n=[{key:\"init\",value:function(){var e=new d.Body({mass:0});e.addShape(this.fixedCubeShape);var t=new f.Mesh(this.fixedCubeGeometry,this.material);t.castShadow=!0,t.receiveShadow=!0,t.position.set(this.x,this.y,this.z),e.position.set(this.x,this.y,this.z),ze.add(t),_e.add(e),this.wallMesh=t,this.wallBody=e}}])&&Q(t.prototype,n),i&&Q(t,i),e}();function $(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ee=function(){function e(t,n,i,o,r,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.x=r,this.y=a,this.z=s,this.fixedCubeMesh={},this.fixedCubeBody={},this.material=t,this.texture=n,this.fixedCubeShape=i,this.fixedCubeGeometry=o}var t,n,i;return t=e,(n=[{key:\"init\",value:function(){var e=new d.Body({mass:0});e.addShape(this.fixedCubeShape);var t=new f.Mesh(this.fixedCubeGeometry,this.material);t.position.set(this.x,this.y,this.z),e.position.set(t.position.x,t.position.y,t.position.z),t.castShadow=!0,t.receiveShadow=!0,ze.add(t),_e.add(e),this.fixedCubeMesh=t,this.fixedCubeBody=e}}])&&$(t.prototype,n),i&&$(t,i),e}();function te(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ne,ie,oe=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.x=t,this.y=n,this.z=i}var t,n,i;return t=e,(n=[{key:\"init\",value:function(){var e=this,t=new X.MTLLoader,n=new X.OBJLoader;t.load(\"./tree/Tree.mtl\",(function(t){t.preload(),n.setMaterials(t),n.load(\"./tree/Tree.obj\",(function(t){t.position.set(e.x,e.y,e.z),t.traverse((function(e){e instanceof f.Mesh&&(e.castShadow=!0,e.receiveShadow=!0)})),ze.add(t)}))}))}}])&&te(t.prototype,n),i&&te(t,i),e}(),re=[\"attribute vec3 position;\",\"attribute vec3 tex;\",\"uniform mat4 projectionMatrix;\",\"uniform mat4 modelViewMatrix;\",\"varying vec3 texOut;\",\"void main ( void ) {\",\"gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\",\"texOut = tex;\",\"}\"].join(\"\\n\"),ae=[\"precision highp float;\",\"vec2 mBBS( vec2 val, float modulus ) {\",\"val = mod( val, modulus ); // For numerical consistancy.\",\"return mod(val * val, modulus);\",\"}\",\"uniform sampler2D nzw;\",\"const float modulus = 61.0;  // Value used in pregenerated noise texture.\",\"float mnoise ( vec3 pos ) {\",\"float intArg = floor( pos.z );\",\"float fracArg = fract( pos.z );\",\"vec2 hash = mBBS( intArg * 3.0 + vec2( 0, 3 ), modulus );\",\"vec4 g = vec4 (\",\"texture2D( nzw, vec2( pos.x, pos.y + hash.x ) / modulus ).xy,\",\"texture2D( nzw, vec2( pos.x, pos.y + hash.y ) / modulus ).xy\",\") * 2.0 - 1.0;\",\"return mix(\",\"g.x + g.y * fracArg,\",\"g.z + g.w * ( fracArg - 1.0 ),\",\"smoothstep( 0.0, 1.0, fracArg )\",\");\",\"}\",\"const int octives = 4;\",\"const float lacunarity = 2.0;\",\"const float gain = 0.5;\",\"float turbulence( vec3 pos ) {\",\"float sum  = 0.0;\",\"float freq = 1.0;\",\"float amp  = 1.0;\",\"for ( int i = 0; i < 4; i++ ) {\",\"sum += abs( mnoise( pos * freq ) ) * amp;\",\"freq *= lacunarity;\",\"amp *= gain;\",\"}\",\"return sum;\",\"}\",\"const float magnatude = 1.3;\",\"uniform float time;\",\"uniform sampler2D fireProfile;\",\"vec4 sampleFire( vec3 loc, vec4 scale ) {\",\"loc.xz = loc.xz * 2.0 - 1.0;\",\"vec2 st = vec2( sqrt( dot( loc.xz, loc.xz ) ), loc.y );\",\"loc.y -= time * scale.w; // Scrolling noise upwards over time.\",\"loc *= scale.xyz; // Scaling noise space.\",\"float offset = sqrt( st.y ) * magnatude * turbulence( loc );\",\"st.y += offset;\",\"if ( st.y > 1.0 ) {\",\"return vec4( 0, 0, 0, 1 );\",\"}\",\"vec4 result = texture2D( fireProfile, st );\",\"if ( st.y < 0.1 ) {\",\"result *= st.y / 0.1;\",\"}\",\"return result;\",\"}\",\"varying vec3 texOut;\",\"void main( void ) {\",\"vec3 color = sampleFire( texOut, vec4( 1.0, 2.0, 1.0, 0.5 ) ).xyz;\",\"gl_FragColor = vec4( color * 1.5, 1 );\",\"}\"].join(\"\\n\"),se=(ie=new f.TextureLoader,function(){if(ne)return ne;var e=ie.load(ue.texturePath+\"nzw.png\");e.wrapS=f.RepeatWrapping,e.wrapT=f.RepeatWrapping,e.magFilter=f.LinearFilter,e.minFilter=f.LinearFilter;var t=ie.load(ue.texturePath+\"firetex.png\");t.wrapS=f.ClampToEdgeWrapping,t.wrapT=f.ClampToEdgeWrapping,t.magFilter=f.LinearFilter,t.minFilter=f.LinearFilter;var n={nzw:{type:\"t\",value:e},fireProfile:{type:\"t\",value:t},time:{type:\"f\",value:1}};return ne=new f.RawShaderMaterial({vertexShader:re,fragmentShader:ae,uniforms:n,side:f.DoubleSide,blending:f.AdditiveBlending,transparent:!0})}),ce=[[1,2,4],[0,5,3],[0,3,6],[1,7,2],[0,6,5],[1,4,7],[2,7,4],[3,5,6]],le=[[-1,2,4,-1,1,-1,-1,-1],[5,-1,-1,0,-1,3,-1,-1],[3,-1,-1,6,-1,-1,0,-1],[-1,7,1,-1,-1,-1,-1,2],[6,-1,-1,-1,-1,0,5,-1],[-1,4,-1,-1,7,-1,-1,1],[-1,-1,7,-1,2,-1,-1,4],[-1,-1,-1,5,-1,6,3,-1]],ue=function(e,t,n,i,o){this.camera=o,this._sliceSpacing=i;var r=.5*e,a=.5*t,s=.5*n;this._posCorners=[new f.Vector3(-r,-a,-s),new f.Vector3(r,-a,-s),new f.Vector3(-r,a,-s),new f.Vector3(r,a,-s),new f.Vector3(-r,-a,s),new f.Vector3(r,-a,s),new f.Vector3(-r,a,s),new f.Vector3(r,a,s)],this._texCorners=[new f.Vector3(0,0,0),new f.Vector3(1,0,0),new f.Vector3(0,1,0),new f.Vector3(1,1,0),new f.Vector3(0,0,1),new f.Vector3(1,0,1),new f.Vector3(0,1,1),new f.Vector3(1,1,1)],this._viewVector=new f.Vector3;var c=new Uint16Array(30*(e+t+n)),l=new Float32Array(30*(e+t+n)*3),u=new Float32Array(30*(e+t+n)*3),p=new f.BufferGeometry;p.dynamic=!0,p.setIndex(new f.BufferAttribute(c,1)),p.addAttribute(\"position\",new f.BufferAttribute(l,3)),p.addAttribute(\"tex\",new f.BufferAttribute(u,3));var d=se();this.mesh=new f.Mesh(p,d),this.mesh.updateMatrixWorld()};ue.prototype.update=function(e){this.updateViewVector(),this.slice(),this.updateGeometry(),this.mesh.material.uniforms.time.value=e},ue.prototype.updateGeometry=function(){this.mesh.geometry.index.array.set(this._indexes),this.mesh.geometry.attributes.position.array.set(this._points),this.mesh.geometry.attributes.tex.array.set(this._texCoords),this.mesh.geometry.index.needsUpdate=!0,this.mesh.geometry.attributes.position.needsUpdate=!0,this.mesh.geometry.attributes.tex.needsUpdate=!0},ue.prototype.updateViewVector=function(){var e=new f.Matrix4;e.multiplyMatrices(this.camera.matrixWorldInverse,this.mesh.matrixWorld),this._viewVector.set(-e.elements[2],-e.elements[6],-e.elements[10]).normalize()},ue.prototype.slice=function(){var e;this._points=[],this._texCoords=[],this._indexes=[];var t=this._posCorners[0].dot(this._viewVector),n=[t],i=0,o=t,r=t;for(e=1;e<8;e=e+1|0)n[e]=this._posCorners[e].dot(this._viewVector),n[e]>r&&(i=e,r=n[e]),n[e]<o&&(o=n[e]);var a=Math.floor(r/this._sliceSpacing)*this._sliceSpacing,s=[],c=0,l=0,u=new fe,p=function(e,t){if(!(l>=12)){var i={expired:!1,startIndex:e,endIndex:t,deltaPos:new f.Vector3,deltaTex:new f.Vector3,pos:new f.Vector3,tex:new f.Vector3,cur:l},o=n[e]-n[t];if(0!==o){var r=1/o;i.deltaPos.subVectors(this._posCorners[t],this._posCorners[e]).multiplyScalar(r),i.deltaTex.subVectors(this._texCorners[t],this._texCorners[e]).multiplyScalar(r);var c=n[e]-a;i.pos.addVectors(i.deltaPos.clone().multiplyScalar(c),this._posCorners[e]),i.tex.addVectors(i.deltaTex.clone().multiplyScalar(c),this._texCorners[e]),i.deltaPos.multiplyScalar(this._sliceSpacing),i.deltaTex.multiplyScalar(this._sliceSpacing)}return u.push(i,n[t]),s[l++]=i,i}};for(e=0;e<3;e=e+1|0){var d=p.call(this,i,ce[i][e]);d.prev=(e+2)%3,d.next=(e+1)%3}for(var h=0;a>o;){for(;u.top().priority>=a;){var m=u.pop().object;if(!m.expired)if(m.endIndex!==s[m.prev].endIndex&&m.endIndex!==s[m.next].endIndex){m.expired=!0;var y=p.call(this,m.endIndex,le[m.endIndex][m.startIndex]);y.prev=m.prev,s[m.prev].next=l-1,y.next=l;var b=p.call(this,m.endIndex,le[m.endIndex][y.endIndex]);b.prev=l-2,b.next=m.next,s[b.next].prev=l-1,c=l-1}else{var v=void 0,w=void 0;m.endIndex===s[m.prev].endIndex?(v=s[m.prev],w=m):(v=m,w=s[m.next]),v.expired=!0,w.expired=!0;var g=p.call(this,m.endIndex,le[m.endIndex][v.startIndex]);g.prev=v.prev,s[g.prev].next=l-1,g.next=w.next,s[g.next].prev=l-1,c=l-1}}var x=c,k=0;do{++k;var E=s[x];this._points.push(E.pos.x,E.pos.y,E.pos.z),this._texCoords.push(E.tex.x,E.tex.y,E.tex.z),E.pos.add(E.deltaPos),E.tex.add(E.deltaTex),x=E.next}while(x!==c);for(e=2;e<k;e=e+1|0)this._indexes.push(h,h+e-1,h+e);h+=k,a-=this._sliceSpacing}},ue.texturePath=\"images/\";var pe,fe=function(){this.contents=[],this.sorted=!1};fe.prototype={sort:function(){this.contents.sort(),this.sorted=!0},pop:function(){return this.sorted||this.sort(),this.contents.pop()},top:function(){return this.sorted||this.sort(),this.contents[this.contents.length-1]},push:function(e,t){this.contents.push({object:e,priority:t}),this.sorted=!1}};var de=function(){!function(e){pe=null,pe={};for(var t=e.length,n=e[0].length,i=(new f.TextureLoader).load(\"images/crate.png\"),o=new f.MeshLambertMaterial({map:i}),r=(new f.TextureLoader).load(\"images/plaster.jpg\"),a=new f.MeshLambertMaterial({map:r}),s=(new f.TextureLoader).load(\"images/Tileable1b.png\"),c=new f.MeshLambertMaterial({map:s}),l=new d.Vec3(2,2,2),u=new d.Vec3(2,3,2),p=new d.Box(l),h=new d.Box(u),m=new f.BoxGeometry(2*l.x,3.8,2*l.z),y=new f.BoxGeometry(2*u.x,6,2*u.z),b=0;b<t;b++)for(var v=0;v<n;v++){var w=4*(b+t)-100,g=4*-(v+t)+100;if(4===e[b][v])new oe(w,-2,g).init();else if(2===e[b][v]){var x=new ee(c,s,p,m,w,2,g);x.init(),qe.push(x.fixedCubeBody),We.push(x.fixedCubeMesh)}else if(1===e[b][v]){var k=new Z(a,r,h,y,w,2,g);k.init(),qe.push(k.wallBody),We.push(k.wallMesh)}else if(3===e[b][v]){var E=new J(o,i,p,m,w,2,g,b,v);E.init(),qe.push(E.cubeBox),We.push(E.cubeMesh),pe[\"\".concat(w,\"_\").concat(g)]=[!0,E]}else 0===e[b][v]&&(pe[\"\".concat(w,\"_\").concat(g)]=!0)}}(B.getState().map)},he=function(e){return 4*Math.round(e/4)},me=function(e,t,n){for(var i=t.getElapsedTime(),o=function(e,t){e&&(e.update(i),e.mesh.position.x===he(De.position.x)&&e.mesh.position.z===he(De.position.z)&&(n||(n=!0,Y.emit(\"kill_player\",{id:Y.id,killedBy:t}),B.dispatch({type:\"KILL_PLAYER\"}))))},r=0;r<e.length;r++)if(e[r].bool)for(var a=1;a<=5;a++){var s=\"fire\";1!==a&&(s+=a),o(e[r][s],e[r].userId)}return n},ye=function(e,t,n,i){for(var o=0;o<e.length;o++)if(n[t[o]]&&!n[t[o]].dead){var r=n[t[o]],a=r.x,s=r.y,c=r.z;i[o].position.set(a,s,c),e[o].position.x=a,e[o].position.y=s,e[o].position.z=c}},be=function(e){for(var t in e)if(e[t].length)for(var n=0;n<e[t].length;n++)e[t][n].loop(t);else delete e[t]},ve=function(e,t,n,i,o,r){for(var a=n.length-i.length,s=0;s<r;s++){var c=i[s].position,l=c.x,u=c.y,p=c.z;n[s+a].position.x=l,n[s+a].position.y=u,n[s+a].position.z=p,o[s+a].position.copy(n[s+a].position)}for(var f=0;f<e.length;f++)t[f].position.copy(e[f].position)},we=function(e,t,n,i,o,r,a,s,c,l,u){for(var p=0;p<n.length;p++)e.remove(n[p]);for(var f=0;f<i.length;f++)t.remove(i[f]);for(var d=0;d<o.length;d++)t.remove(o[d]);for(var h=0;h<r.length;h++)e.remove(r[h]);for(var m=0;m<s.length;m++)s[m].clearTimeout&&clearTimeout(s[m].clearTimeout),s[m].bombBody&&t.remove(s[m].bombBody);for(var y=0;y<c.length;y++)e.remove(c[y]);for(var b=0;b<u.length;b++)e.remove(u[b]);for(var v=0;v<l.length;v++)t.remove(l[v])},ge=function(e,t,n){var i=n;n.set(0,0,1),e.unprojectVector(i,t);var o=new f.Ray(De.position,i.sub(De.position).normalize());n.copy(o.direction)},xe=function(e){return new Promise((function(t){setTimeout(t,e)}))},ke=function(e,t){e[t].length&&pe[t][1].explode()&&Y.emit(\"destroy_cube\",{j:pe[t][1].j,k:pe[t][1].k})},Ee=function(e,t,n,i,o){var r=new ue(4,12,4,.5,t);return r.mesh.frustumCulled=!1,r.mesh.position.set(n,i,o),e.add(r.mesh),ue.texturePath=\"../../public/assets/images\",r};function Se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Me,_e,Oe,Ce,ze,Te,je,Pe,Be,Ae,Ne=function(){function e(t,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.id=t,this.userId=o,this.position=n,this.bool=!0,this.clearTimeout=null,this.material=i,this.bombMesh,this.bombBody,this.bombShape,this.fire,this.fire2,this.fire3,this.fire4,this.fire5,this.fire6,this.fire7,this.fire8,this.fire9}var t,n,i;return t=e,(n=[{key:\"init\",value:function(){B.getState().sound&&this.initSound(),this.bombShape=new d.Sphere(1.5);var e=new f.SphereGeometry(this.bombShape.radius,32,32);this.bombBody=new d.Body({mass:10}),this.bombBody.addShape(this.bombShape),this.bombMesh=new f.Mesh(e,this.material),this.bombMesh.castShadow=!0,this.bombMesh.receiveShadow=!0,_e.addBody(this.bombBody),ze.add(this.bombMesh),this.initFlashing()}},{key:\"explode\",value:function(){for(var e=he(this.bombBody.position.x),t=this.bombBody.position.y+4,n=he(this.bombBody.position.z),i=new f.SphereGeometry(.2,.2,.2),o=[],r=0;r<Ze;r++){var a=new N(ze,_e,{x:e,y:t,z:n},\"bomb\",i,this.material);o.push(a)}Qe[this.bombMesh.id]=o.slice(),ze.remove(this.bombMesh),_e.remove(this.bombBody);var s=\"\".concat(e,\"_\").concat(n),c=\"\".concat(e+4,\"_\").concat(n),l=\"\".concat(e-4,\"_\").concat(n),u=\"\".concat(e,\"_\").concat(n+4),p=\"\".concat(e-4,\"_\").concat(n+4),d=\"\".concat(e+4,\"_\").concat(n+4),h=\"\".concat(e,\"_\").concat(n-4),m=\"\".concat(e-4,\"_\").concat(n-4),y=\"\".concat(e+4,\"_\").concat(n-4);pe[s]&&(this.fire=Ee(ze,Ce,e,t,n),ke(pe,s)),pe[c]&&(this.fire2=Ee(ze,Ce,e+4,t,n),ke(pe,c)),pe[l]&&(this.fire3=Ee(ze,Ce,e-4,t,n),ke(pe,l)),pe[u]&&(this.fire4=Ee(ze,Ce,e,t,n+4),ke(pe,u)),pe[p]&&(this.fire4=Ee(ze,Ce,e-4,t,n+4),ke(pe,p)),pe[d]&&(this.fire4=Ee(ze,Ce,e+4,t,n+4),ke(pe,d)),pe[h]&&(this.fire5=Ee(ze,Ce,e,t,n-4),ke(pe,h)),pe[m]&&(this.fire5=Ee(ze,Ce,e-4,t,n-4),ke(pe,m)),pe[y]&&(this.fire5=Ee(ze,Ce,e+4,t,n-4),ke(pe,y)),this.removeFire()}},{key:\"removeFire\",value:function(){var e=this;setTimeout((function(){e.fire&&ze.remove(e.fire.mesh),e.fire2&&ze.remove(e.fire2.mesh),e.fire3&&ze.remove(e.fire3.mesh),e.fire4&&ze.remove(e.fire4.mesh),e.fire5&&ze.remove(e.fire5.mesh),e.fire6&&ze.remove(e.fire6.mesh),e.fire7&&ze.remove(e.fire7.mesh),e.fire8&&ze.remove(e.fire8.mesh),e.fire9&&ze.remove(e.fire9.mesh),e.fire=null,e.fire2=null,e.fire3=null,e.fire4=null,e.fire5=null,e.fire6=null,e.fire7=null,e.fire8=null,e.fire9=null,e.bool=!1}),1e3)}},{key:\"initSound\",value:function(){var e=new f.PositionalAudio(Ve);(new f.AudioLoader).load(\"sounds/explosion.mp3\",(function(t){e.setBuffer(t),e.setRefDistance(10),e.play()}))}},{key:\"initFlashing\",value:function(){var e,t=this,n=!1;setTimeout((function(){e=setInterval((function(){n?n&&t.bombMesh.material.color.setHex(0):t.bombMesh.material.color.setHex(5308416),n=!n}),100)}),800),this.clearTimeout=setTimeout((function(){t.explode(),clearInterval(e),t.bombMesh.material=t.material}),1700)}}])&&Se(t.prototype,n),i&&Se(t,i),e}();function Le(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}var Ie,Re,Ve,De,Ge=Date.now(),Fe=[],Ue=[],qe=[],We=[],Ye=[],Ke=[],He=[],Je=[],Xe=[],Qe={},Ze=50,$e=[],et=1,tt=!1,nt=!0,it=1/60,ot=0,rt=0,at=[{x:4,y:1.5,z:-4},{x:4,y:1.5,z:-93},{x:93,y:1.5,z:-93},{x:93,y:1.5,z:-4}],st=new f.MeshPhongMaterial({color:0,specular:328965,shininess:100});var ct=new d.Sphere(1.5),lt=(new f.SphereGeometry(ct.radius,32,32),new f.Vector3),ut=new f.Projector;function pt(){(Ce=new f.PerspectiveCamera(55,window.innerWidth/window.innerHeight,.1,1500)).position.set(0,3,0),ze=new f.Scene;var e=new f.AmbientLight(4210752);ze.add(e),(je=new f.SpotLight(16777215)).position.set(200,100,0),je.target.position.set(0,0,0),je.castShadow=!0,ze.add(je),Re=new f.Clock,Ie=new K(Ce,De),ze.add(Ie.getObject()),(Pe=new f.PlaneGeometry(500,500,20,20)).applyMatrix((new f.Matrix4).makeRotationX(-Math.PI/2));var t=(new f.TextureLoader).load(\"images/grasslight-big.jpg\");Be=new f.MeshLambertMaterial({map:t}),t.wrapS=f.RepeatWrapping,t.wrapT=f.RepeatWrapping,t.repeat.x=20,t.repeat.y=20,(Ae=new f.Mesh(Pe,Be)).castShadow=!1,Ae.receiveShadow=!0,ze.add(Ae);var n=new f.SphereGeometry(1e3,32,32),i=new f.MeshBasicMaterial({color:\"#00bfff\"}),o=new f.Mesh(n,i);o.material.side=f.BackSide,ze.add(o),(Te=new f.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),Te.setSize(window.innerWidth,window.innerHeight),Te.shadowMap.enabled=!0,Te.shadowMap.type=f.PCFSoftShadowMap,document.body.appendChild(Te.domElement),window.addEventListener(\"resize\",ft,!1),de(),De.position.x=100,De.position.y=100,De.position.z=100,Ve=new f.AudioListener,Ce.add(Ve);var r,a=B.getState().players;for(var s in a)a[s].nickname&&((r=new I(s,a[s].x,a[s].y,a[s].z,a[s].dead,a[s].nickname)).init(),Ye.push(r.playerBox),Ke.push(r.playerMesh),Xe.push(r));Ie&&window.addEventListener(\"mousedown\",(function(e){!function(e){if(1==Ie.enabled&&!tt&&nt){var t=De.position.x,n=De.position.y,i=De.position.z,o=new Ne(et++,{x:t,y:n,z:i},st,Y.id);o.init(),nt=!1,setTimeout((function(){nt=!0}),500);var r={id:o.id,position:o.bombBody.position,created:Date.now()};Y.emit(\"add_bomb\",{userId:Y.id,bombId:r.id,position:{x:t,y:n,z:i}}),setTimeout((function(){He=He.filter((function(e){return e.id!==r.id})),Je=Je.filter((function(e){return o.bombMesh.id!==e.id}))}),2e3),He.push(r),$e.push(o),Je.push(o.bombMesh),ge(ut,Ce,lt),o.bombBody.velocity.set(lt.x*e,lt.y*e,lt.z*e),t+=lt.x*(1.02*Me.radius+o.bombShape.radius),n+=lt.y*(1.02*Me.radius+o.bombShape.radius),i+=lt.z*(1.02*Me.radius+o.bombShape.radius),o.bombBody.position.set(t,n,i),o.bombMesh.position.set(t,n,i)}}(40)})),setInterval((function(){Y&&Y.emit(\"update_world\",{playerId:Y.id,playerPosition:{x:De.position.x,y:De.position.y,z:De.position.z},dead:tt,playerBombs:He}),50===++rt&&(De.position.x=at[q.indexOf(Y.id)].x,De.position.y=5,De.position.z=at[q.indexOf(Y.id)].z),_e.step(it);var e=B.getState(),t=e.players,n=Object.keys(t),i=e.bombs,o=[],r=function(e){var t=i[e].map((function(t){return t.userId=e,t}));o.push.apply(o,Le(t))};for(var a in i)r(a);if(n.length!==Ye.length)for(var s in Ye.forEach((function(e){_e.remove(e)})),Ke.forEach((function(e){ze.remove(e)})),Ye=[],Ke=[],Xe=[],t)if(t[s].nickname){var c=void 0;(c=new I(s,t[s].x,t[s].y,t[s].z,!1)).init(),Ye.push(c.playerBox),Ke.push(c.playerMesh),Xe.push(c)}if(o.length>ot){var l=o[o.length-1],u=new Ne(l.id,l.position,st,l.userId);u.init(),Fe.push(u.bombBody),$e.push(u),Ue.push(u.bombMesh)}ot=o.length,tt=me($e,Re,tt),ye(Ye,n,t,Ke),be(Qe),ve(He,Je,Fe,o,Ue,ot)}),1e3/60)}function ft(){Ce.aspect=window.innerWidth/window.innerHeight,Ce.updateProjectionMatrix(),Te.setSize(window.innerWidth,window.innerHeight)}function dt(){setTimeout((function(){requestAnimationFrame(dt)}),1e3/60),Ie.update(Date.now()-Ge),Te.render(ze,Ce),Ge=Date.now()}var ht=n(110),mt=n.n(ht),yt={largeIcon:{width:60,height:60,fontSize:60,color:\"#fff\"},large:{width:120,height:120,padding:30}},bt={muteSound:function(){return{type:\"MUTE\"}},unmuteSound:function(){return{type:\"UNMUTE\"}}},vt=Object(s.b)((function(e){return{sound:j(e)}}),bt)((function(e){var t=e.sound,n=e.muteSound,i=e.unmuteSound,r=t?n:i,a=t?\"volume_up\":\"volume_off\";return o.a.createElement(\"div\",{className:\"mute\"},o.a.createElement(mt.a,{onClick:r,disableTouchRipple:!0,iconClassName:\"material-icons\",iconStyle:yt.largeIcon,style:yt.large},a))}));function wt(e){return(wt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function gt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var St=function(e){function t(e){var n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),i=this,(n=!(o=xt(t).call(this,e))||\"object\"!==wt(o)&&\"function\"!=typeof o?kt(i):o).state={instructions:!0},n.handleClick=n.handleClick.bind(kt(n)),n}var n,i,r;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(t,e),n=t,(i=[{key:\"componentDidMount\",value:function(){var e=this,t=document.body,n=this.refs.blocker,i=this.refs.instructions;document.addEventListener(\"pointerlockchange\",(function(o){document.pointerLockElement===t||document.mozPointerLockElement===t||document.webkitPointerLockElement===t?(Ie.enabled=!0,n.style.display=\"none\"):(Ie.enabled=!1,n.style.display=\"-webkit-box\",n.style.display=\"-moz-box\",n.style.display=\"box\",i.style.display=\"\",e.setState({instructions:!0}))}),!1)}},{key:\"handleClick\",value:function(e){var t=document.body;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock(),this.setState({instructions:!1})}},{key:\"render\",value:function(){return o.a.createElement(\"div\",{id:\"blocker\",ref:\"blocker\"},this.state.instructions&&o.a.createElement(\"div\",{id:\"instructions\",ref:\"instructions\",onClick:this.handleClick},o.a.createElement(\"span\",{className:\"blocker-title\"},\"Klik untuk Bermain\"),o.a.createElement(\"br\",null),o.a.createElement(\"span\",{className:\"blocker-instruction-controls\"},\"(W,A,S,D = Jalan, MOUSE = Kamera, CLICK = Lempar Bom)\"),o.a.createElement(\"br\",null),o.a.createElement(\"span\",{className:\"blocker-instruction-controls\"},\"(ENTER = Buka Chat, ` = Tutup chat, ESC = Instruksi)\"),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),o.a.createElement(\"span\",{className:\"blocker-instruction-controls\"},\" Tips: \"),o.a.createElement(\"br\",null),o.a.createElement(\"span\",{className:\"blocker-instruction-tips\"},\"Kotak kayu bisa hancur jika terkena bomb\"),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),o.a.createElement(\"span\",{className:\"blocker-instruction-tips\"},\"Batu tidak bisa hancur terkena bomb. Jadi berlindunglah di balik batu.\"),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),o.a.createElement(\"span\",{className:\"blocker-instruction-tips\"},\"Kamu bisa melempar bomb untuk memindahkan bomb dari lawan\"),o.a.createElement(\"br\",null),o.a.createElement(\"br\",null),o.a.createElement(\"span\",{className:\"blocker-instruction-tips\"},\"Hati-hati. JANGAN BUNDIR!\"),o.a.createElement(\"br\",null)),o.a.createElement(vt,null))}}])&&gt(n.prototype,i),r&&gt(n,r),t}(i.Component),Mt=n(172),_t=n.n(Mt),Ot=n(71),Ct=n.n(Ot);function zt(e){return(zt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function Tt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function Bt(e,t){return(Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var At={colorGray:{color:\"#D5D1D0\"},colorRed:{color:\"#CC2D2D\"},borderColor:{borderColor:\"#CC2D2D\"},buttonStyle:{display:\"block\",borderColor:\"none\"}},Nt=function(e){function t(e){var n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),i=this,(n=!(o=jt(t).call(this,e))||\"object\"!==zt(o)&&\"function\"!=typeof o?Pt(i):o).state={nickname:\"\"},n.updateNickname=n.updateNickname.bind(Pt(n)),n.setNickname=n.setNickname.bind(Pt(n)),n}var n,i,r;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bt(e,t)}(t,e),n=t,(i=[{key:\"updateNickname\",value:function(e){this.setState({nickname:e.target.value})}},{key:\"setNickname\",value:function(){Y.emit(\"set_nickname\",this.state.nickname),this.props.startGame()}},{key:\"render\",value:function(){return o.a.createElement(\"div\",{id:\"backgroundimage\"},o.a.createElement(\"div\",{id:\"name\",className:\"center\"},o.a.createElement(\"h1\",{id:\"title\"},\"Gelud Kuy\"),o.a.createElement(\"div\",{id:\"nickname-form\"},o.a.createElement(Ct.a,{id:\"nickname\",onChange:this.updateNickname,maxLength:15,hintText:\"Nickname\",hintStyle:At.colorGray,floatingLabelText:\"Nickname\",floatingLabelStyle:At.colorRed,underlineFocusStyle:At.borderColor,inputStyle:At.colorGray}),o.a.createElement(_t.a,{disabled:!this.state.nickname,onClick:this.setNickname,backgroundColor:At.colorRed.color,disabledBackgroundColor:At.colorGray.color,label:\"Play\",style:At.buttonStyle}))),o.a.createElement(vt,null))}}])&&Tt(n.prototype,i),r&&Tt(n,r),t}(i.Component),Lt={startGame:function(){return{type:\"START_GAME\"}}},It=Object(s.b)(null,Lt)(Nt),Rt=Object(s.b)((function(e){return{killerNickname:M(e),victimNickname:_(e)}}))((function(e){var t=e.killerNickname,n=e.victimNickname;return o.a.createElement(\"div\",null,0!==t.length&&(t===n?o.a.createElement(\"h1\",{className:\"center\",id:\"announcer\"},t,\" committed suicide.\"):o.a.createElement(\"h1\",{className:\"center\",id:\"announcer\"},t,\" killed \",n,\".\")))}));function Vt(e){return(Vt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function Dt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Gt(e){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qt={borderStyles:{borderColor:\"#ffffff\"},fontStyles:{ontSize:15,color:\"#ffffff\"}},Wt=function(e){function t(e){var n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),i=this,(n=!(o=Gt(t).call(this,e))||\"object\"!==Vt(o)&&\"function\"!=typeof o?Ft(i):o).state={message:\"\"},n.submitMessage=n.submitMessage.bind(Ft(n)),n.handleMessageChange=n.handleMessageChange.bind(Ft(n)),n}var n,i,r;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(t,e),n=t,(i=[{key:\"componentDidMount\",value:function(){var e=this;window.addEventListener(\"keydown\",(function(t){13===t.keyCode&&(e.props.startChat(),Ie.enabled=!1),192===t.keyCode&&(e.props.stopChat(),Ie.enabled=!0)}),!1)}},{key:\"componentDidUpdate\",value:function(){this.props.isChatting&&this.refs.chat.focus()}},{key:\"submitMessage\",value:function(e){13===e.keyCode&&this.state.message.length>0&&(Ie.enabled=!0,Y.emit(\"new_message\",{id:Y.id,message:this.state.message}),this.setState({message:\"\"}),this.props.stopChat())}},{key:\"handleMessageChange\",value:function(e){this.setState({message:e.target.value})}},{key:\"render\",value:function(){var e=this.handleMessageChange,t=this.submitMessage,n=this.props,i=n.lastFiveMessages,r=n.isChatting,a=this.state.message,s=i.map((function(e,t){return o.a.createElement(\"h1\",{key:\"\".concat(t),className:\"chat-message\"},e)}));return o.a.createElement(\"div\",{className:\"chat-box\"},s,r?o.a.createElement(Ct.a,{id:\"chat\",ref:\"chat\",onChange:e,onKeyDown:t,value:a,underlineFocusStyle:qt.borderStyles,inputStyle:qt.fontStyles}):o.a.createElement(\"h1\",{className:\"chat-message\"},\"Press Enter to Chat / Back Tick to Exit Chat\"))}}])&&Dt(n.prototype,i),r&&Dt(n,r),t}(i.Component),Yt={startChat:function(){return{type:\"START_CHAT\"}},stopChat:function(){return{type:\"STOP_CHAT\"}}},Kt=Object(s.b)((function(e){return{isChatting:z(e),isPlaying:k(e),lastFiveMessages:T(e)}}),Yt)(Wt);function Ht(e){return(Ht=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xt(e,t){return!t||\"object\"!==Ht(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $t=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(n=Xt(this,Qt(t).call(this,e))).state={players:{},ownInfo:{}},n}var n,i,r;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zt(e,t)}(t,e),n=t,(i=[{key:\"componentDidMount\",value:function(){var e=this;xe(100).then((function(){var t=B.getState();e.setState({players:t.players,ownInfo:t.ownInfo})}))}},{key:\"render\",value:function(){var e=this.state.ownInfo,t=this.state.players,n=Object.keys(t).map((function(e){return t[e]}));return n.push(e),n.sort((function(e,t){return t.score-e.score})),o.a.createElement(\"div\",{id:\"scores\"},o.a.createElement(\"ul\",{id:\"scoreslist\"},o.a.createElement(\"li\",{key:\"score\"},o.a.createElement(\"h3\",null,\"Score:\")),o.a.createElement(\"hr\",null),n.length&&n.map((function(e,t){return o.a.createElement(\"li\",{key:\"\".concat(t)},\"\".concat(e.nickname,\":   \").concat(e.score))}))))}}])&&Jt(n.prototype,i),r&&Jt(n,r),t}(i.Component),en=function(e){var t,n=e.winner,i=B.getState().players;return Y.id===n&&n?(t=\"You win!\",Y.emit(\"reset_world\",{})):n&&(t=i[n].nickname+\" wins!\"),o.a.createElement(\"div\",null,o.a.createElement(\"h1\",{id:\"winner\",className:\"center\"},t),o.a.createElement($t,null))},tn=function(){return o.a.createElement(\"div\",{className:\"dead-overlay\"},o.a.createElement(\"span\",{className:\"dead-message\"},\"Kamu mati. DASAR NUB!\"))},nn=function(e){var t=Math.floor(e/60)||0;t=t.toString();var n=Math.floor(e-60*t);return n=n<10?\"0\"+n.toString():n.toString(),\"\".concat(t,\":\").concat(n)},on=Object(s.b)((function(e){return{time:w(e),isPlaying:k(e)}}))((function(e){return o.a.createElement(\"div\",{className:\"timer\"},e.time?nn(e.time):\"\")}));function rn(e){return(rn=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function an(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function sn(e,t){return!t||\"object\"!==rn(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var un=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),sn(this,cn(t).apply(this,arguments))}var n,i,r;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}(t,e),n=t,(i=[{key:\"componentDidMount\",value:function(){xe(500).then((function(){!function(){Y&&Y.emit(\"get_players\",{}),(_e=new d.World).quatNormalizeSkip=0,_e.quatNormalizeFast=!1;var e=new d.GSSolver;_e.defaultContactMaterial.contactEquationStiffness=1e9,_e.defaultContactMaterial.contactEquationRelaxation=4,e.iterations=7,e.tolerance=.1,_e.solver=new d.SplitSolver(e),_e.solver.iterations=20,_e.solver.tolerance=0,_e.gravity.set(0,-50,0),_e.broadphase=new d.NaiveBroadphase,Oe=new d.Material(\"groundMaterial\");var t=new d.ContactMaterial(Oe,Oe,{friction:.7,restitution:.3,contactEquationStiffness:1e8,contactEquationRelaxation:3,frictionEquationStiffness:1e8,frictionEquationRegularizationTime:3});_e.addContactMaterial(t),Me=new d.Sphere(1.3),(De=new d.Body({mass:100,material:Oe})).addShape(Me),De.position.set(0,5,0),De.linearDamping=.9,_e.addBody(De);var n=new d.Plane,i=new d.Body({mass:0});i.addShape(n),i.quaternion.setFromAxisAngle(new d.Vec3(1,0,0),-Math.PI/2),i.receiveShadow=!0,_e.addBody(i)}(),pt(),dt()}))}},{key:\"render\",value:function(){var e=this.props,t=e.isPlaying,n=e.winner,i=e.dead;return o.a.createElement(\"div\",null,t&&o.a.createElement(Kt,null),t&&o.a.createElement(Rt,null),!t&&o.a.createElement(It,null),n&&o.a.createElement(en,{winner:n}),o.a.createElement(St,{dead:i}),i&&o.a.createElement(tn,null),t&&!n&&o.a.createElement(on,null))}}])&&an(n.prototype,i),r&&an(n,r),t}(i.Component),pn=Object(s.b)((function(e){return{dead:b(e),winner:x(e),isPlaying:k(e)}}))(un);n(385);l()();a.a.render(o.a.createElement(s.a,{store:B},o.a.createElement((function(){return o.a.createElement(p.a,null,o.a.createElement(pn,null))}),null)),document.getElementById(\"app\"))}});","extractedComments":[]}